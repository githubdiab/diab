(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19016a98"],{"8b4a":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-app-list-page w-100"},[a("basic-subheader",{scopedSlots:t._u([{key:"actions",fn:function(){return[a("b-dropdown",{staticClass:"dropdown-form-filter",attrs:{id:"dropdown-right dropdown-form","no-caret":"",right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[a("span",{staticClass:"svg-icon"},[a("inline-svg",{attrs:{src:"/media/svg/icons/Neolex/Basic/filter.svg"}})],1),t._v(" Bộ lọc ")]},proxy:!0}])},[a("h6",{staticClass:"d-flex align-items-center mb-0 p-4"},[a("span",{staticClass:"svg-icon mr-3"},[a("inline-svg",{attrs:{src:"/media/svg/icons/Neolex/Basic/filter.svg"}})],1),t._v(" Bộ lọc ")]),a("b-dropdown-divider"),a("b-dropdown-form",[a("b-container",{staticClass:"p-0"},[a("b-row",[a("b-col",[a("basic-input",{attrs:{label:"Mã nhân viên",placeholder:"Nhập mã nhân viên",name:"code",value:t.filter.code},on:{"update:value":function(e){return t.$set(t.filter,"code",e)}}})],1),a("b-col",[a("basic-input",{attrs:{label:"Tên nhân viên",placeholder:"Nhập tên nhân viên",name:"name",value:t.filter.name},on:{"update:value":function(e){return t.$set(t.filter,"name",e)}}})],1),a("b-col",[a("basic-select",{attrs:{label:"Giới tính",placeholder:"--- Chọn giới tính ---",name:"gender",options:t.isGenderOpts,value:t.filter.gender,solid:!1,allowEmpty:!0},on:{"update:value":function(e){return t.$set(t.filter,"gender",e)}}})],1)],1),a("b-row",[a("b-col",[a("b-row",[a("b-col",[a("label",{attrs:{for:"age"}},[t._v("Độ tuổi")]),a("b-row",[a("b-col",[a("basic-input",{directives:[{name:"validate",rawName:"v-validate",value:"numeric",expression:"'numeric'"}],attrs:{placeholder:"Từ",name:"ageFrom","data-vv-as":"Tuổi từ",state:t.validateState("ageFrom"),invalidFeedback:t.errors.first("ageFrom"),inputType:"number",value:t.filter.ageFrom},on:{"update:value":function(e){return t.$set(t.filter,"ageFrom",e)}}})],1),a("b-col",[a("basic-input",{directives:[{name:"validate",rawName:"v-validate",value:"numeric",expression:"'numeric'"}],attrs:{placeholder:"Đến",name:"ageTo","data-vv-as":"Tuổi đến",state:t.validateState("ageTo"),invalidFeedback:t.errors.first("ageTo"),inputType:"number",value:t.filter.ageTo},on:{"update:value":function(e){return t.$set(t.filter,"ageTo",e)}}})],1)],1)],1)],1)],1),a("b-col",[a("basic-select",{attrs:{label:"Bệnh viện",placeholder:"--- Chọn ---",name:"hospital",disabled:"",options:[],value:t.filter.hospital,solid:!1,allowEmpty:!0},on:{"update:value":function(e){return t.$set(t.filter,"hospital",e)}}})],1),a("b-col",[a("basic-select",{attrs:{label:"Thuộc nhóm Health Coach",placeholder:"--- Chọn nhóm Health Coach ---",name:"healthCoachGroup",options:[],disabled:"",value:t.filter.healthCoachGroup,solid:!1,allowEmpty:!0},on:{"update:value":function(e){return t.$set(t.filter,"healthCoachGroup",e)}}})],1)],1),a("b-row",[a("b-col",[a("basic-select",{attrs:{label:"Thuộc nhóm user",placeholder:"--- Chọn nhóm user ---",name:"userGroup",disabled:"",options:[],value:t.filter.userGroup,solid:!1,allowEmpty:!0},on:{"update:value":function(e){return t.$set(t.filter,"userGroup",e)}}})],1),a("b-col",[a("basic-select",{attrs:{label:"Quốc gia",placeholder:"--- Chọn quốc gia ---",name:"nation",apiPath:"/Division/Nations",searchField:"searchTerm",value:t.filter.nationId,solid:!1,allowEmpty:!0},on:{"update:value":function(e){return t.$set(t.filter,"nationId",e)}}})],1),a("b-col",[a("basic-select",{attrs:{label:"Tỉnh thành",placeholder:"--- Chọn tỉnh thành ---",name:"province",apiPath:"/Division/Provinces",searchField:"searchTerm",searchParams:{nationId:t.filter.nationId},value:t.filter.provinceId,solid:!1,allowEmpty:!0},on:{"update:value":function(e){return t.$set(t.filter,"provinceId",e)}}})],1)],1),a("b-row",[a("b-col",[a("basic-select",{attrs:{label:"Quận / huyện",placeholder:"--- Chọn quận / huyện ---",name:"district",apiPath:"/Division/Dictricts",searchField:"searchTerm",searchParams:{provinceId:t.filter.provinceId},value:t.filter.districtId,solid:!1,allowEmpty:!0},on:{"update:value":function(e){return t.$set(t.filter,"districtId",e)}}})],1),a("b-col",[a("basic-select",{attrs:{label:"Phường xã",placeholder:"--- Chọn phường xã ---",name:"wards",apiPath:"/Division/Wards",searchField:"searchTerm",searchParams:{districtId:t.filter.districtId},value:t.filter.wardId,solid:!1,allowEmpty:!0},on:{"update:value":function(e){return t.$set(t.filter,"wardId",e)}}})],1),a("b-col")],1),a("b-row",[a("b-col",[a("b-form-checkbox-group",{attrs:{options:[{text:"Lọc người dùng Inactive",value:!0}]},model:{value:t.filter.excludeInactive,callback:function(e){t.$set(t.filter,"excludeInactive",e)},expression:"filter.excludeInactive"}})],1)],1)],1)],1),a("b-dropdown-divider"),a("div",{staticClass:"d-flex align-items-center justify-content-lg-end m-0 p-4"},[a("b-button",{staticClass:"btn ml-2",attrs:{href:"#",tabindex:"0"},on:{click:t.resetRequest}},[a("span",{staticClass:"svg-icon"},[a("inline-svg",{attrs:{src:"/media/svg/icons/Neolex/Basic/refresh-cw.svg"}})],1),t._v(" Reset bộ lọc ")]),a("b-button",{staticClass:"btn ml-2",attrs:{href:"#",tabindex:"0"},on:{click:t.searchRequest}},[a("span",{staticClass:"svg-icon"},[a("inline-svg",{attrs:{src:"/media/svg/icons/Neolex/Basic/filter.svg"}})],1),t._v(" Lọc dữ liệu ")])],1)],1),a("b-button",{staticClass:"btn btn-success ml-2",attrs:{type:"button"},on:{click:t.importItems}},[a("span",{staticClass:"svg-icon"},[a("inline-svg",{attrs:{src:"/media/svg/icons/Neolex/Basic/upload-cloud.svg"}})],1),t._v(" Import danh sách ")]),t.isAdmin?a("b-button",{staticClass:"btn btn-success ml-2",attrs:{type:"button"},on:{click:t.createItem}},[a("span",{staticClass:"svg-icon"},[a("inline-svg",{attrs:{src:"/media/svg/icons/Neolex/Basic/plus.svg"}})],1),t._v(" Thêm tài khoản ")]):t._e()]},proxy:!0}])}),a("b-overlay",{attrs:{show:t.loading}},[a("b-container",{staticClass:"user-app-list-page__body mb-6 mt-6",attrs:{fluid:""}},[a("b-row",[a("b-col",[a("div",{staticClass:"card card-custom gutter-b"},[a("div",{staticClass:"card-body mt-0"},[a("template-table",{attrs:{column:t.column,data:t.data,paging:t.paging,tableAction:!1,selectAction:!1,searchAction:!1},on:{search:t.searchRequest,reset:t.resetRequest,sortBy:t.sortRequest},scopedSlots:t._u([{key:"body",fn:function(e){var i=e.item;return[a("td",[a("div",{staticClass:"d-flex align-items-center mt-5"},[a("avatar",{attrs:{size:"40px",text:i.fullName,src:i.avatar&&i.avatar.url,rounded:!0}}),a("div",{staticClass:"d-flex flex-column ml-5"},[a("p",{staticClass:"mb-0",staticStyle:{"font-weight":"600","font-size":"13px",color:"#515356"}},[t._v(" "+t._s(i.fullName)+" ")]),a("p",{staticClass:"mt-2 mb-0",staticStyle:{"font-size":"12px",color:"#888c9f"}},[t._v(" "+t._s(i.username)+" ")])])],1)]),a("td",{staticStyle:{width:"20px"}},[a("action-dropdown",{attrs:{value:i,show_edit:t.isAdmin,show_delete:!1,show_copy:t.isAdmin},on:{view:t.viewItem,edit:t.editItem,copy:t.copyItem}},[t.isAdmin?a("b-dropdown-text",{staticClass:"navi-item cursor-pointer",attrs:{tag:"div"}},[a("a",{staticClass:"navi-link cursor-pointer",on:{click:function(e){return t.deleteItem(i)}}},[a("span",{staticClass:"menu-icon svg-icon svg-icon-sm",class:i.isActive?"text-danger":"text-primary"},[a("inline-svg",{staticClass:"svg-icon",attrs:{src:"/media/svg/icons/Neolex/Basic/power.svg"}})],1),a("span",{staticClass:"success navi-text",class:i.isActive?"text-danger":"text-primary"},[t._v(" "+t._s(i.isActive?"Inactive":"Active")+" ")])])]):t._e()],1)],1),a("td",[t._v(" "+t._s(i.age)+" ")]),a("td",[t._v(" "+t._s(i.gender)+" ")]),a("td",[t._v(" "+t._s(i.hospital)+" ")]),a("td",[t._v(" "+t._s(i.usersGroup)+" ")]),a("td",[t._v(" "+t._s(i.healthCoachGroup)+" ")])]}}])})],1)])])],1)],1)],1)],1)},n=[],s=(a("99af"),a("4de4"),a("caad"),a("b0c0"),a("d3b7"),a("2532"),a("96cf"),a("1da1")),l=a("5530"),r=a("2f62"),o={data:function(){return{paging:{page:1,pageSize:10,total:0},filter:{code:null,name:null,gender:null,ageFrom:null,ageTo:null,hospital:null,nation:null,provinceId:null,district:null,wards:null,excludeInactive:null},sort:{by:null,order:null},isActiveOpts:[{id:!0,name:"Active"},{id:!1,name:"Inactive"}],isGenderOpts:[{id:1,name:"Nam"},{id:2,name:"Nữ"}],column:[{key:"username",label:"Nhân viên",sortable:!0},{key:"actionDropdown",label:"",sortable:!1},{key:"age",label:"Độ tuổi",sortable:!1},{key:"gender",label:"Giới tính",sortable:!1},{key:"hospital",label:"Bệnh Viện",sortable:!1},{key:"usersGroup",label:"Nhóm Users",sortable:!1},{key:"healthCoachGroup",label:"Nhóm Health Coach",sortable:!1}],data:[],loading:!1}},computed:Object(l["a"])(Object(l["a"])({},Object(r["c"])(["currentUser"])),{},{isAdmin:function(){var t,e=null===(t=this.currentUser)||void 0===t?void 0:t.roles;return!(!e||!e.length)&&e.includes("Admin")},searchParams:function(){var t;return{name:this.filter.name,excludeInactive:1==(null===(t=this.filter.excludeInactive)||void 0===t?void 0:t[0]),sortBy:this.sort.by?"".concat(this.sort.by," ").concat(this.sort.order):null,code:this.filter.code,gender:this.filter.gender,ageFrom:this.filter.ageFrom,ageTo:this.filter.ageTo,nationId:this.filter.nationId,provinceId:this.filter.provinceId,districtId:this.filter.districtId,wardId:this.filter.wardId,page:this.paging.page,size:this.paging.pageSize}}}),watch:{paging:{handler:function(){this.loadData()},deep:!0},sort:{handler:function(){this.loadData()},deep:!0}},methods:{pagingAction:function(){this.loadData()},searchRequest:function(){this.loadData()},resetRequest:function(){var t=this;this.filter.code=null,this.filter.name=null,this.filter.gender=null,this.filter.ageFrom=null,this.filter.ageTo=null,this.filter.hospital=null,this.filter.nationId=null,this.filter.provinceId=null,this.filter.districtId=null,this.filter.wardId=null,this.filter.excludeInactive=[],this.$nextTick((function(){t.$validator.reset()})),this.loadData()},sortRequest:function(t){this.sort={by:t.column,order:t.order}},viewItem:function(t){this.$router.push({name:"user_portal_view",params:{id:t.id}})},editItem:function(t){this.$router.push({name:"user_portal_detail",params:{form_type:"edit",id:t.id}})},createItem:function(){this.$router.push({name:"user_portal_detail",params:{form_type:"create"}})},validateState:function(t){return this.veeFields[t]&&this.veeFields[t].dirty&&this.veeFields[t].validated?this.veeFields[t].valid:null},importItems:function(){},deleteItem:function(t){var e=t.isActive?"Inactive":"Active",a=t.isActive?"btn-inactive":"btn-active";this.$swal({title:"",text:"Bạn có chắc muốn ".concat(e," app user ").concat(t.fullName," không?"),icon:"/media/svg/icons/SweetAlert/alert-triangle-red.svg",buttons:{cancel:{text:"Quay lại",value:!1,visible:!0,className:"btn btn-secondary",closeModal:!0},confirm:{text:"".concat(e),value:!0,visible:!0,className:"btn ".concat(a),closeModal:!0}}}).then(function(e){var a=this;e&&this.inactiveItem(t).then((function(){a.loadData(),a.$swal("Thành công!","Chúc mừng, bạn đã cập nhật thông tin người dùng thành công!","success")})).catch((function(){a.$swal("Lỗi!","Đã có lỗi xảy ra.","error")}))}.bind(this))},copyItem:function(t){this.$router.push({name:"user_portal_detail",params:{form_type:"copy",id:t.id}})},inactiveItem:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,a.prev=1,i=new FormData,i.append("id",t.id),i.append("active",!t.isActive),a.next=7,e.$api.put("Admin/Account/portal",i);case 7:a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](1),e.$toastr.e({title:"Lỗi!",msg:a.t0});case 12:return a.prev=12,e.loading=!1,a.finish(12);case 15:case"end":return a.stop()}}),a,null,[[1,9,12,15]])})))()},loadData:function(){var t=this;this.$store.commit("context/setLoading",!0),this.$api.get("Admin/Account/portal",{params:Object(l["a"])({},this.searchParams)}).then((function(e){var a=e.data;t.data=a.items||[],t.paging.total=a.total})).catch((function(e){t.$toastr.e({title:"Lỗi",msg:e})})).finally((function(){t.$store.commit("context/setLoading",!1)}))}},mounted:function(){this.loadData()}},c=o,d=(a("f00e"),a("2877")),u=Object(d["a"])(c,i,n,!1,null,"54625857",null);e["default"]=u.exports},"9fa1":function(t,e,a){},f00e:function(t,e,a){"use strict";a("9fa1")}}]);
//# sourceMappingURL=chunk-19016a98.99bed7f0.js.map