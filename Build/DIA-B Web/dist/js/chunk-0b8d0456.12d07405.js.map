{"version":3,"sources":["webpack:///./src/view/pages/user_import/components/messages/messageContinue.vue?89a3","webpack:///src/view/pages/user_import/components/messages/messageContinue.vue","webpack:///./src/view/pages/user_import/components/messages/messageContinue.vue?848c","webpack:///./src/view/pages/user_import/components/messages/messageContinue.vue?e7f8","webpack:///./src/view/pages/user_import/components/messages/messageContinue.vue?ea5a"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","attrs","scopedSlots","_u","key","fn","staticClass","staticStyle","on","$event","goback","_v","handleClick","proxy","staticRenderFns","props","staff_list","type","default","name","computed","watch","data","isMounted","loading","isSelectFile","form","validationState","error","checkaccount","methods","addUser","i","headers","params","user_name","user_code","user_gender","user_yearofbirth","user_career","user_phone","user_hoobit","user_address","user_province","story_success","user_typeofsick","year_foundout","AddSurvey","a","n","j","survey_day","b","survey_type_code_KIND","user_id","course_goal","course_action","course_final_rate","participation_package","survey_type","survey_code","survey_type_code","survey_name","catch","title","msg","elimited","openModalCheckRecord","CloseModalSuccess","openModalSuccess","finally","mounted","component"],"mappings":"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","file":"js/chunk-0b8d0456.12d07405.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-modal',{ref:\"user-import-modal\",attrs:{\"id\":\"user-import-modal\",\"hide-header\":\"\",\"no-stacking\":\"\"},scopedSlots:_vm._u([{key:\"modal-footer\",fn:function(){return [_c('b-button',{staticClass:\"btn btn-success ml-2\",staticStyle:{\"width\":\"90px\"},attrs:{\"href\":\"#\",\"tabindex\":\"0\"},on:{\"click\":function($event){return _vm.goback()}}},[_vm._v(\" Huỷ \")]),_c('b-button',{staticClass:\"btn btn-success ml-2\",attrs:{\"href\":\"#\",\"tabindex\":\"0\"},on:{\"click\":function($event){return _vm.handleClick()}}},[_c('span',{staticClass:\"svg-icon\"},[_c('inline-svg',{attrs:{\"src\":\"/media/svg/import/tick.svg\"}})],1),_vm._v(\" Đồng ý \")])]},proxy:true}])},[_c('div',{staticStyle:{\"text-align\":\"center\",\"margin\":\"5px\",\"padding\":\"10px\"}},[_c('span',{staticClass:\"svg-tick\"},[_c('inline-svg',{staticStyle:{\"justify-self\":\"center\"},attrs:{\"src\":\"/media/svg/import/alert-circle.svg\"}})],1)]),_c('div',[_c('p',{staticStyle:{\"text-align\":\"center\",\"font-family\":\"Nunito\",\"font-style\":\"normal\",\"font-weight\":\"bold\",\"font-size\":\"15px\",\"line-height\":\"20px\"}},[_vm._v(\"Bạn có muốn Import các khách hàng đủ điều kiện ? \")]),_c('p',{staticStyle:{\"text-align\":\"left\",\"font-family\":\"Nunito\",\"font-style\":\"normal\",\"font-weight\":\"normal\",\"font-size\":\"15px\",\"line-height\":\"20px\",\"color\":\"red\"}},[_vm._v(\"( Lưu ý : Các khách hàng có liên quan đến các bản ghi bị lỗi ở trên sẽ không được thêm )\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n         \r\n  <b-modal\r\n    id=\"user-import-modal\"\r\n    ref=\"user-import-modal\"\r\n    hide-header\r\n    \r\n    no-stacking\r\n  >\r\n            <div style=\"text-align:center; margin:5px; padding: 10px;\">\r\n            <span class=\"svg-tick\" >\r\n            <inline-svg src=\"/media/svg/import/alert-circle.svg\" style=\"justify-self: center;\"/>\r\n             </span>\r\n            </div>\r\n           \r\n        <div>\r\n\r\n          \r\n        <p style=\"text-align:center;font-family: Nunito;font-style: normal;font-weight: bold;font-size: 15px;line-height: 20px;\">Bạn có muốn Import các khách hàng đủ điều kiện ? </p>           \r\n      <p style=\"text-align:left;font-family: Nunito;font-style: normal;font-weight: normal;font-size: 15px;line-height: 20px; color:red\">( Lưu ý : Các khách hàng có liên quan đến các bản ghi bị lỗi ở trên sẽ không được thêm )</p>\r\n         \r\n          </div>\r\n    <template #modal-footer style=\"text-align:center\">\r\n        <!--<b-button class=\"btn btn-secondary\" href=\"#\" tabindex=\"0\">\r\n          <span class=\"svg-icon\">\r\n            <inline-svg src=\"/media/svg/icons/Neolex/Basic/power.svg\" />\r\n          </span>\r\n          Hủy\r\n        </b-button> -->\r\n      \r\n          \r\n\r\n        <b-button\r\n          class=\"btn btn-success ml-2\"\r\n          href=\"#\"\r\n          @click=\"goback()\"\r\n          tabindex=\"0\"\r\n          style=\"width:90px\"\r\n          \r\n        >\r\n        \r\n          Huỷ\r\n        \r\n        </b-button>\r\n\r\n        <b-button\r\n          class=\"btn btn-success ml-2\"\r\n          href=\"#\"\r\n          @click=\"handleClick()\"\r\n          tabindex=\"0\"\r\n          \r\n        >\r\n        <span class=\"svg-icon\">\r\n            <inline-svg src=\"/media/svg/import/tick.svg\" />\r\n          </span>\r\n         Đồng ý\r\n          \r\n        </b-button>\r\n\r\n        \r\n      \r\n      \r\n    </template>\r\n  </b-modal>\r\n</template>\r\n\r\n<script>\r\n//import axios from 'axios'\r\nexport default {\r\n  props:{\r\n  staff_list:{\r\n    type: Array,\r\n    default: ()=>[],\r\n  }\r\n  },\r\n  name: 'Modal',\r\n \r\n  computed: {\r\n\r\n\r\n    \r\n  },\r\n  watch: {},\r\n  // mounted() {this.$root.$on('Modal',()=>{\r\n  //   this.handleClick()\r\n  // })},\r\n  data() {\r\n    return {\r\n      isMounted: false,\r\n      loading: false,\r\n      isSelectFile: false,\r\n      form: {},\r\n      validationState: {},\r\n      error: {},\r\n      checkaccount:[],\r\n      \r\n    };\r\n    \r\n  },\r\n  \r\n  methods: {\r\n  \r\n   async  addUser() {\r\n\r\n      for(let i=0;i<Number(this.elimited().length);i++)\r\n      {\r\n        await this.$api.post('accountimport', {headers: {'Content-Type': 'application/json'}}, {\r\n        params: {\r\n            \r\n          user_name: this.elimited()[i].user_name,\r\n          user_code: this.elimited()[i].user_code,\r\n          user_gender: this.elimited()[i].user_gender,\r\n          user_yearofbirth: this.elimited()[i].user_yearofbirth,\r\n          user_career: this.elimited()[i].user_career,\r\n          user_phone: this.elimited()[i].user_phone,\r\n          user_hoobit: this.elimited()[i].user_hoobit,\r\n          user_address: this.elimited()[i].user_address,\r\n          user_province: this.elimited()[i].user_province,\r\n          story_success: this.elimited()[i].story_success,\r\n          user_typeofsick: this.elimited()[i].user_typeofsick,\r\n          year_foundout:this.elimited()[i].year_foundout,\r\n           \r\n        },\r\n         \r\n        })\r\n        \r\n        ;;\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n   },\r\n\r\n   async AddSurvey ()\r\n {\r\n\r\n   for(let a=0;a<=Number(this.elimited().length);a++)\r\n     {\r\n\r\n     await  this.$api.get('accountimport/id').then(res=>{          //get all id \r\n       this.checkaccount = res     \r\n     });\r\n     \r\n     }\r\n       await  this.$api.get('surveyimport/id').then(res=>{          //get survey_code , user_id\r\n       this.checksurvey = res});\r\n  // console.log(this.checksurvey)\r\n   \r\n  for(let n=0;n< this.checkaccount.length;n++)\r\n    for(let j=0;j<Number(this.elimited().length);j++)\r\n     {\r\n  \r\n   const survey_day = new Date(this.elimited()[j].survey_day).toISOString();\r\n  // const import_day = new Date(this.elimited()[j].import_day).toISOString();\r\n\r\n  //let toTimestamp = strDate => Date.parse(strDate)\r\n\r\n  if( this.checkaccount[n].user_code===Number(this.elimited()[j].user_code))\r\n  {\r\n    const a = this.checksurvey.filter((item)=> item.user_id===this.checkaccount[n].id )\r\n    const b = this.checksurvey.filter((item)=> item.survey_code===this.elimited()[j].survey_code)\r\n   \r\n   if(a.length>0 && b.length>0)      // check duplicate survey_imports\r\n    { \r\n     //console.log(this.checksurvey[j].survey_code ,this.checksurvey[j].user_id,this.checkaccount[n].id)\r\n      // console.log(this.checksurvey.filter((item)=> item.user_id===this.checkaccount[n].id ))\r\n      // console.log(this.checksurvey.filter((item)=> item.survey_code===this.elimited()[j].survey_code))\r\n\r\n            this.openModalCheckRecord();\r\n          \r\n  }\r\n else\r\n {\r\n    var survey_type_code_KIND = 'Khác'\r\n\r\n   if(this.elimited()[j].survey_code.slice(0,4)==='KSDV')\r\n   {\r\n       survey_type_code_KIND = 'KSDV'\r\n   }\r\n   if(this.elimited()[j].survey_code.slice(0,4)==='KSDR')\r\n   {\r\n        survey_type_code_KIND = 'KSDR'\r\n   }\r\n\r\n  await  this.$api.post('surveyimport',{headers: {'Content-Type': 'application/json'}}, {\r\n  \r\n       params: {    \r\n\r\n      user_id :  this.checkaccount[n].id,\r\n      course_goal: this.elimited()[j].course_goal,\r\n      course_action:this.elimited()[j].course_action,\r\n      course_final_rate:this.elimited()[j].course_final_rate,\r\n      participation_package:this.elimited()[j].participation_package,\r\n     \r\n      survey_type:this.elimited()[j].survey_type,\r\n      survey_code:this.elimited()[j].survey_code,\r\n      //survey_type_code:this.elimited()[j].survey_type_code,\r\n        survey_type_code:survey_type_code_KIND,\r\n      survey_name:this.elimited()[j].survey_name,\r\n     // import_day:  import_day.slice(0, 10),\r\n      survey_day: survey_day.slice(0, 10)\r\n        },\r\n   \r\n      \r\n      })\r\n      .catch((error) => {\r\n          this.$toastr.e({\r\n            title: 'Lỗi',\r\n            msg: error,\r\n          });\r\n        })   \r\n     }\r\n  }\r\n     }\r\n },\r\n     elimited: function()\r\n   {  \r\n    \r\n    return this.staff_list.filter((item, pos, self) => self.findIndex(v => v.user_code === item.user_code) === pos);\r\n  },\r\n \r\n\r\n   \r\n     openModalCheckRecord: function()\r\n    {\r\n        this.$root.$refs.B.clickshow_checkrecord();\r\n       this.CloseModalSuccess();\r\n      \r\n        \r\n    },\r\n\r\n    CloseModalSuccess: function()\r\n    {\r\n        this.$root.$refs.B.clickhide();\r\n        \r\n    },\r\n\r\n    openModalSuccess: function()\r\n    {\r\n        this.$root.$refs.B.clickshow();\r\n        \r\n    },\r\n    goback()\r\n    {\r\n      this.$bvModal.hide('user-import-modal')\r\n    //  this.$root.$refs.A.NotselectFile();\r\n    },\r\n\r\n    async handleClick(){\r\n         this.$root.$refs.B.SelectFile();\r\n      this.$store.commit('context/setLoading', true);\r\n   // await this.addUser().then( this.AddSurvey()).then(this.goback()) ---------------1 user\r\n    await this.addUser().then(this.AddSurvey()).then(this.goback())\r\n        .finally(() => {\r\n          this.$store.commit('context/setLoading', false);\r\n             this.openModalSuccess();\r\n          \r\n        });\r\n   \r\n    \r\n     \r\n    },\r\n    \r\n  },\r\n  mounted(){\r\n      this.elimited();\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.modal-dialog {\r\n  height: 60%;\r\n  width: 600px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.modal-content {\r\n  margin: 0 auto;\r\n}\r\n.modal-footer{\r\n  justify-content: center;\r\n  //text-align: center;\r\n}\r\n.svg-tick{\r\n    justify-content: center;\r\n}\r\n\r\n\r\n</style>\r\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./messageContinue.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./messageContinue.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./messageContinue.vue?vue&type=template&id=eac567c8&\"\nimport script from \"./messageContinue.vue?vue&type=script&lang=js&\"\nexport * from \"./messageContinue.vue?vue&type=script&lang=js&\"\nimport style0 from \"./messageContinue.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./messageContinue.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}