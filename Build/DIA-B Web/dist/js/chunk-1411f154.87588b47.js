(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1411f154"],{c1dc:function(t,e,i){"use strict";i("c86c")},c59e:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-import-list-page w-100"},[i("basic-subheader",{scopedSlots:t._u([{key:"actions",fn:function(){return[i("b-dropdown",{staticClass:"dropdown-form-filter",attrs:{id:"dropdown-right dropdown-form","no-caret":"",right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[i("span",{staticClass:"svg-icon"},[i("inline-svg",{attrs:{src:"/media/svg/icons/Neolex/Basic/filter.svg"}})],1),t._v(" Bộ lọc ")]},proxy:!0}])},[i("h6",{staticClass:"d-flex align-items-center mb-0 p-4"},[i("span",{staticClass:"svg-icon mr-3"},[i("inline-svg",{attrs:{src:"/media/svg/icons/Neolex/Basic/filter.svg"}})],1),t._v(" Bộ lọc ")]),i("b-dropdown-divider"),i("b-dropdown-form",[i("b-container",{staticClass:"p-0"},[i("div",[i("b-row",[i("b-col",[i("basic-input",{attrs:{label:"Tên bệnh nhân",placeholder:"Nhập tên bệnh nhân",name:"userName",value:t.filter.Username},on:{"update:value":function(e){return t.$set(t.filter,"Username",e)}}})],1),i("b-col",[i("basic-input",{attrs:{label:"Số điện thoại",placeholder:"Nhập số điện thoại",name:"userPhone",inputType:"text",value:t.filter.UserPhone},on:{"update:value":function(e){return t.$set(t.filter,"UserPhone",e)}}})],1),i("b-col",[i("label",[t._v("Độ tuổi")]),i("p",{staticStyle:{height:"0px"}},[t._v("sssssss")]),i("div",[i("b-row",[i("basic-input",{staticStyle:{width:"100px"},attrs:{placeholder:"Từ",name:"UserAgeFrom",inputType:"number",value:t.filter.UserAgeFrom},on:{"update:value":function(e){return t.$set(t.filter,"UserAgeFrom",e)}}}),i("p",{staticStyle:{color:"white"}},[t._v("spa")]),i("basic-input",{staticStyle:{width:"100px"},attrs:{placeholder:"Đến",name:"UserAgeTo",inputType:"number",value:t.filter.UserAgeTo},on:{"update:value":function(e){return t.$set(t.filter,"UserAgeTo",e)}}})],1)],1)])],1)],1),i("b-row",[i("b-col",[i("basic-select",{attrs:{label:"Gói tham gia",placeholder:"--- Chọn ---",name:"ParticipationPackage",options:t.isPackage,value:t.filter.ParticipationPackage,solid:!1,allowEmpty:!0},on:{"update:value":function(e){return t.$set(t.filter,"ParticipationPackage",e)}}})],1),i("b-col",[i("basic-select",{attrs:{label:"Loại khảo sát",placeholder:"--- Chọn ---",name:"SurveyType",options:t.isSurveyTypes,value:t.filter.SurveyType,solid:!1,allowEmpty:!0},on:{"update:value":function(e){return t.$set(t.filter,"SurveyType",e)}}})],1),i("b-col",[i("basic-select",{attrs:{label:"Tên khảo sát",placeholder:"--- Nhập tên khảo sát ---",name:"SurveyName",options:t.isSurveyName,value:t.filter.SurveyName,solid:!1,allowEmpty:!0},on:{"update:value":function(e){return t.$set(t.filter,"SurveyName",e)}}})],1)],1),i("b-row",{staticStyle:{float:"left"}},[i("b-col",[i("label",[t._v("Ngày thực hiện khảo sát")]),i("b-col"),i("b-row",[i("basic-input",{staticStyle:{width:"175px"},attrs:{inputType:"text",name:"SurveyDayFrom",placeholder:"Từ",onfocus:"(this.type='date')",value:t.filter.SurveyDayFrom},on:{"update:value":function(e){return t.$set(t.filter,"SurveyDayFrom",e)}}}),i("p",{staticStyle:{color:"white"}},[t._v("spa")]),i("basic-input",{staticStyle:{width:"175px"},attrs:{placeholder:"Đến",name:"SurveyDayTo",value:t.filter.SurveyDayTo,onfocus:"(this.type='date')",inputType:"text"},on:{"update:value":function(e){return t.$set(t.filter,"SurveyDayTo",e)}}})],1)],1),i("p",{staticStyle:{color:"white"}},[t._v("spacespacee")]),i("b-col",[i("label",[t._v("Ngày Import")]),i("b-col"),i("b-row",[i("basic-input",{staticStyle:{width:"175px"},attrs:{placeholder:"Từ",name:"ImportDayFrom",value:t.filter.ImportDayFrom,onfocus:"(this.type='date')",inputType:"text",allowEmpty:!0},on:{"update:value":function(e){return t.$set(t.filter,"ImportDayFrom",e)}}}),i("p",{staticStyle:{color:"white"}},[t._v("spa")]),i("basic-input",{staticStyle:{width:"175px"},attrs:{placeholder:"Đến",name:"ImportDayTo",value:t.filter.ImportDayTo,onfocus:"(this.type='date')",inputType:"text"},on:{"update:value":function(e){return t.$set(t.filter,"ImportDayTo",e)}}})],1)],1)],1)],1)],1),i("b-dropdown-divider"),i("div",{staticClass:"d-flex align-items-center justify-content-lg-end m-0 p-4"},[i("b-button",{staticClass:"btn ml-2",attrs:{href:"#",tabindex:"0"},on:{click:t.resetFilter}},[i("span",{staticClass:"svg-icon"},[i("inline-svg",{attrs:{src:"/media/svg/icons/Neolex/Basic/refresh-cw.svg"}})],1),t._v(" Reset bộ lọc ")]),i("b-button",{staticClass:"btn ml-2",attrs:{href:"#",tabindex:"0"},on:{click:t.filtetest}},[i("span",{staticClass:"svg-icon"},[i("inline-svg",{attrs:{src:"/media/svg/icons/Neolex/Basic/filter.svg"}})],1),t._v(" Lọc dữ liệu ")])],1)],1),i("b-button",{staticClass:"btn btn-success ml-2",attrs:{type:"button",id:"show-btn"},on:{click:t.handleImportUser}},[t._v(" Import ")])]},proxy:!0}])}),i("b-container",{staticClass:"user-import-list-page__body mb-6 mt-6",attrs:{fluid:""}},[i("b-row",[i("b-col",[i("div",{staticClass:"card card-custom gutter-b"},[i("div",{staticClass:"card-body mt-0"},[i("template-table",{attrs:{column:t.column,data:t.filtetest(),paging:t.paging,tableAction:!1,selectAction:!1,searchAction:!1},on:{search:t.searchRequest,reset:t.resetRequest},scopedSlots:t._u([{key:"body",fn:function(e){var r=e.item;return[i("td",[t._v(" "+t._s(r.user_name)+" ")]),i("td",{staticStyle:{width:"20px"}},[i("action-dropdown",{attrs:{value:r,show_edit:!1,show_delete:!1,show_copy:!1},on:{view:t.viewItem,edit:t.editItem,copy:t.copyItem}})],1),i("td",{staticStyle:{"padding-left":"25px"}},[t._v(t._s(r.user_typeofsick))]),i("td",{staticStyle:{"padding-left":"25px"}},[t._v(t._s(t.$moment(1e3*(r.survey_day+86400)).format("DD/MM/YYYY")))]),i("td",[t._v(t._s(r.participation_package))]),i("td",[t._v(t._s(r.survey_type))]),i("td",[t._v(t._s(r.survey_name)),i("br"),t._v("Mã số: "+t._s(r.survey_code)+" ")])]}}])})],1)])])],1)],1),i("user-import-modal",{attrs:{popupType:"popupType"},on:{loadData:t.loadData}})],1)},a=[],s=(i("4de4"),i("c740"),i("fb6a"),i("b0c0"),i("a9e3"),i("d3b7"),i("96cf"),i("1da1")),n=i("5530"),l={components:{"user-import-modal":function(){return Promise.all([i.e("chunk-161c575b"),i.e("chunk-66ef6edc")]).then(i.bind(null,"8f7b"))}},data:function(){return{selected:{},paging:{page:1,pageSize:10,total:10},filter:{Username:null,UserPhone:null,UserAgeFrom:null,UserAgeTo:null,ParticipationPackage:null,SurveyType:null,SurveyName:null,ImportDayFrom:null,ImportDayTo:null,SurveyDayFrom:null,SurveyDayTo:null},list:{undefined:void 0},column:[{key:"user_name",label:"Bệnh nhân",sortable:!1},{key:"",label:"",sortable:!1},{key:"user_typeofsick",label:"Loại bệnh",sortable:!1},{key:"survey_import",label:"Ngày cập nhập",sortable:!0},{key:"participation_package",label:"Gói tham gia",sortable:!1},{key:"survey_type",label:"Loại khảo sát",sortable:!1},{key:"survey_name",label:"Tên khảo sát",sortable:!1}],staff_list:[],isPackage:[],isSurveyName:[],isSurveyTypes:[{id:0,name:"Khảo sát đầu vào"},{id:1,name:"Khảo sát đầu ra"}]}},computed:{stafflist_total:function(){return this.staff_list.length},searchParams:function(){return{page:this.paging.page,size:this.paging.pageSize}},filteredList:function(){var t=this;return null!==this.filter.Username?this.staff_list.filter((function(e){return e.user_name===t.filter.Username})):null!==this.filter.UserPhone?this.staff_list.filter((function(e){return e.user_phone===t.filter.UserPhone})):null!==this.filter.UserAgeFrom&&null!==this.filter.UserAgeTo?this.staff_list.filter((function(e){return(new Date).getFullYear()-Number(e.user_yearofbirth)>=t.filter.UserAgeFrom&&(new Date).getFullYear()-Number(e.user_yearofbirth)<=t.filter.UserAgeTo})):null!==this.filter.UserAgeFrom?this.staff_list.filter((function(e){return(new Date).getFullYear()-Number(e.user_yearofbirth)>=t.filter.UserAgeFrom})):null!==this.filter.UserAgeTo?this.staff_list.filter((function(e){return(new Date).getFullYear()-Number(e.user_yearofbirth)<=t.filter.UserAgeTo})):this.filter.ImportDayFrom&&null!==this.filter.ImportDayTo?this.staff_list.filter((function(e){return new Date(1e3*e.import_day).toISOString().slice(0,10).valueOf()>=t.filter.ImportDayFrom.valueOf()&&new Date(1e3*e.import_day).toISOString().slice(0,10).valueOf()<=t.filter.ImportDayTo.valueOf()})):null!==this.filter.ImportDayFrom?this.staff_list.filter((function(e){return new Date(1e3*e.import_day).toISOString().slice(0,10).valueOf()>=t.filter.ImportDayFrom.valueOf()})):null!==this.filter.ImportDayTo?this.staff_list.filter((function(e){return new Date(1e3*e.import_day).toISOString().slice(0,10).valueOf()<=t.filter.ImportDayTo.valueOf()})):this.filter.SurveyDayFrom&&null!==this.filter.SurveyDayTo?this.staff_list.filter((function(e){return new Date(1e3*e.survey_day).toISOString().slice(0,10).valueOf()>=t.filter.SurveyDayFrom.valueOf()&&new Date(1e3*e.survey_day).toISOString().slice(0,10).valueOf()<=t.filter.SurveyDayTo.valueOf()})):null!==this.filter.SurveyDayFrom?this.staff_list.filter((function(e){return new Date(1e3*e.survey_day).toISOString().slice(0,10).valueOf()>=t.filter.SurveyDayFrom.valueOf()})):null!==this.filter.SurveyDayTo?this.staff_list.filter((function(e){return new Date(1e3*e.survey_day).toISOString().slice(0,10).valueOf()<=t.filter.SurveyDayTo.valueOf()})):null!==this.filter.ParticipationPackage?this.staff_list.filter((function(e){return e.participation_package===t.isPackage[t.filter.ParticipationPackage].name})):null!==this.filter.SurveyName?this.staff_list.filter((function(e){return e.survey_name===t.isSurveyName[t.filter.SurveyName].name})):null!==this.filter.SurveyType?this.staff_list.filter((function(e){return e.survey_type===t.isSurveyTypes[t.filter.SurveyType].name})):0}},watch:{paging:{handler:function(){this.loadData()},deep:!0}},methods:{pagingAction:function(){this.loadData()},viewItem:function(t){this.$router.push({name:"user_import_detail",params:{user_code:t.user_code,id:t.id,survey_code:t.survey_code}})},editItem:function(t){this.$router.push({name:"user_group_detail",params:{form_type:"edit",id:t.id}})},searchRequest:function(){},resetRequest:function(){var t=this;this.filter.searchKey=null,this.$nextTick((function(){t.$validator.reset()})),this.loadData()},dateSort:function(t,e){var i=new Date(t.survey_day).getTime(),r=new Date(e.survey_day).getTime();return i-r},loadData:function(){var t=this;this.$store.commit("context/setLoading",!0),this.$api.get("SurveyImportResults/user_import",{params:Object(n["a"])({},this.searchParams)}).then((function(e){t.staff_list=e})).catch((function(e){t.$toastr.e({title:"Lỗi",msg:e})})).finally((function(){t.$store.commit("context/setLoading",!1)}))},handleImportUser:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$nextTick((function(){t.$bvModal.show("user-import-modal")}));case 1:case"end":return e.stop()}}),e)})))()},resetFilter:function(){this.filter.Username=null,this.filter.UserPhone=null,this.filter.UserAgeFrom=null,this.filter.UserAgeTo=null,this.filter.ParticipationPackage=null,this.filter.SurveyType=null,this.filter.SurveyName=null,this.filter.ImportDayFrom=null,this.filter.ImportDayTo=null,this.filter.SurveyDayFrom=null,this.filter.SurveyDayTo=null,this.paging.size=10},filtetest:function(){return null!==(this.filter.Username||this.filter.UserPhone||this.filter.UserAgeFrom||this.filter.UserAgeTo||this.filter.ParticipationPackage||this.filter.SurveyType||this.filter.SurveyName||this.filter.ImportDayFrom||this.filter.ImportDayTo||this.filter.SurveyDayFrom||this.filter.SurveyDayTo)?(this.addID(),this.filteredList):(this.addID(),this.staff_list)},elimited:function(){return this.staff_list.filter((function(t,e,i){return i.findIndex((function(e){return e.participation_package===t.participation_package}))===e}))},elimited2:function(){return this.staff_list.filter((function(t,e,i){return i.findIndex((function(e){return e.survey_name===t.survey_name}))===e}))},addID:function(){for(var t=0;t<Number(this.elimited().length);t++)this.isPackage[t]={id:[t],name:this.elimited()[t].participation_package};for(var e=0;e<Number(this.elimited2().length);e++)this.isSurveyName[e]={id:[e],name:this.elimited2()[e].survey_name}}},mounted:function(){this.loadData()}},o=l,u=(i("c1dc"),i("2877")),c=Object(u["a"])(o,r,a,!1,null,"32c3a914",null);e["default"]=c.exports},c86c:function(t,e,i){}}]);
//# sourceMappingURL=chunk-1411f154.87588b47.js.map