{"version":3,"sources":["webpack:///./src/view/pages/user_import/components/messages/messageCheckRecord.vue?84ae","webpack:///./src/view/pages/user_import/components/messages/messageCheckRecord.vue?7e1c","webpack:///src/view/pages/user_import/components/messages/messageCheckRecord.vue","webpack:///./src/view/pages/user_import/components/messages/messageCheckRecord.vue?a037","webpack:///./src/view/pages/user_import/components/messages/messageCheckRecord.vue?4326"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","attrs","scopedSlots","_u","key","fn","staticClass","staticStyle","on","$event","goback","_v","isSelectFile","handleClick","proxy","_s","CheckNote","staff_list","user_name","user_code","survey_name","survey_code","CheckStatus","CheckContent","staticRenderFns","props","type","String","name","computed","watch","created","data","isMounted","loading","form","validationState","error","checkaccount","state_surveyresult","mounted","loadData","methods","$bvModal","hide","component"],"mappings":"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","file":"js/chunk-58e39d6f.7ba9ea7f.js","sourcesContent":["export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./messageCheckRecord.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-modal',{ref:\"user-import-modal_checkrecord\",attrs:{\"id\":\"user-import-modal_checkrecord\",\"hide-header\":\"\",\"no-close-on-backdrop\":\"\"},scopedSlots:_vm._u([{key:\"modal-footer\",fn:function(){return [_c('b-button',{staticClass:\"btn btn-success ml-2\",staticStyle:{\"width\":\"90px\"},attrs:{\"href\":\"#\",\"tabindex\":\"0\"},on:{\"click\":function($event){return _vm.goback()}}},[_vm._v(\" Huỷ \")]),_c('b-button',{staticClass:\"btn btn-success ml-2\",attrs:{\"href\":\"#\",\"tabindex\":\"0\",\"disabled\":_vm.isSelectFile},on:{\"click\":function($event){return _vm.handleClick()}}},[_c('span',{staticClass:\"svg-icon\"},[_c('inline-svg',{attrs:{\"src\":\"/media/svg/import/tick.svg\"}})],1),_vm._v(\" Đồng ý \")])]},proxy:true}])},[_c('div',{staticStyle:{\"text-align\":\"center\",\"margin\":\"5px\",\"padding\":\"10px\"}},[_c('span',{staticClass:\"svg-tick\"},[_c('inline-svg',{staticStyle:{\"justify-self\":\"center\"},attrs:{\"src\":\"/media/svg/import/alert-circle.svg\"}})],1)]),_c('div',[_c('p',{staticStyle:{\"text-align\":\"center\",\"font-family\":\"Nunito\",\"font-style\":\"normal\",\"font-weight\":\"bold\",\"font-size\":\"20px\",\"line-height\":\"20px\",\"color\":\"red\"}},[_vm._v(\"Chú ý: Đã tồn tại bộ khảo sát này !\")]),_c('p',{staticStyle:{\"text-align\":\"center\",\"font-family\":\"Nunito\",\"font-style\":\"normal\",\"font-weight\":\"normal\",\"font-size\":\"17px\",\"line-height\":\"20px\",\"color\":\"red\"}},[_vm._v(_vm._s(_vm.CheckNote))]),_c('ul',[_c('li',[_c('p',{staticStyle:{\"text-align\":\"left\",\"font-family\":\"Nunito\",\"font-style\":\"normal\",\"font-weight\":\"normal\",\"font-size\":\"18px\",\"line-height\":\"20px\"}},[_vm._v(\"Bệnh Nhân: \"+_vm._s(_vm.staff_list[0].user_name))])]),_c('li',[_c('p',{staticStyle:{\"text-align\":\"left\",\"font-family\":\"Nunito\",\"font-style\":\"normal\",\"font-weight\":\"normal\",\"font-size\":\"18px\",\"line-height\":\"20px\"}},[_vm._v(\"Mã Bệnh Nhân: \"+_vm._s(_vm.staff_list[0].user_code))])]),_c('li',[_c('p',{staticStyle:{\"text-align\":\"left\",\"font-family\":\"Nunito\",\"font-style\":\"normal\",\"font-weight\":\"normal\",\"font-size\":\"18px\",\"line-height\":\"20px\"}},[_vm._v(\"Bộ Khảo Sát: \"+_vm._s(_vm.staff_list[0].survey_name))])]),_c('li',[_c('p',{staticStyle:{\"text-align\":\"left\",\"font-family\":\"Nunito\",\"font-style\":\"normal\",\"font-weight\":\"normal\",\"font-size\":\"18px\",\"line-height\":\"20px\"}},[_vm._v(\"Mã Khảo Sát: \"+_vm._s(_vm.staff_list[0].survey_code))])]),_c('li',[_c('p',{staticStyle:{\"text-align\":\"left\",\"font-family\":\"Nunito\",\"font-style\":\"normal\",\"font-weight\":\"normal\",\"font-size\":\"18px\",\"line-height\":\"20px\",\"color\":\"blue\"}},[_vm._v(\"Trạng thái: \"+_vm._s(_vm.CheckStatus))])])]),_c('p',{staticStyle:{\"text-align\":\"center\",\"font-family\":\"Nunito\",\"font-style\":\"normal\",\"font-weight\":\"normal\",\"font-size\":\"17px\",\"line-height\":\"20px\",\"color\":\"red\"}},[_vm._v(_vm._s(_vm.CheckContent))])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n         \n  <b-modal\n    id=\"user-import-modal_checkrecord\"\n    ref=\"user-import-modal_checkrecord\"\n    hide-header\n     no-close-on-backdrop\n  \n  >\n            <div style=\"text-align:center; margin:5px; padding: 10px;\">\n            <span class=\"svg-tick\" >\n            <inline-svg src=\"/media/svg/import/alert-circle.svg\" style=\"justify-self: center;\"/>\n             </span>\n            </div>\n           \n        <div>\n\n           \n        <p style=\"text-align:center;font-family: Nunito;font-style: normal;font-weight: bold;font-size: 20px;line-height: 20px;color:red\">Chú ý: Đã tồn tại bộ khảo sát này !</p>\n        <p style=\"text-align:center;font-family: Nunito;font-style: normal;font-weight: normal;font-size: 17px;line-height: 20px; color:red\">{{CheckNote}}</p>    \n\n        <ul>       \n        <li><p style=\"text-align:left;font-family: Nunito;font-style: normal;font-weight: normal;font-size: 18px;line-height: 20px; \">Bệnh Nhân: {{staff_list[0].user_name}}</p></li>\n        <li><p style=\"text-align:left;font-family: Nunito;font-style: normal;font-weight: normal;font-size: 18px;line-height: 20px; \">Mã Bệnh Nhân: {{staff_list[0].user_code}}</p></li>\n         <li><p style=\"text-align:left;font-family: Nunito;font-style: normal;font-weight: normal;font-size: 18px;line-height: 20px; \">Bộ Khảo Sát: {{staff_list[0].survey_name}}</p></li>\n        <li><p style=\"text-align:left;font-family: Nunito;font-style: normal;font-weight: normal;font-size: 18px;line-height: 20px; \">Mã Khảo Sát: {{staff_list[0].survey_code}}</p></li>\n        <li><p style=\"text-align:left;font-family: Nunito;font-style: normal;font-weight: normal;font-size: 18px;line-height: 20px;color:blue \">Trạng thái: {{CheckStatus}}</p></li>\n        </ul>\n        <p style=\"text-align:center;font-family: Nunito;font-style: normal;font-weight: normal;font-size: 17px;line-height: 20px; color:red\">{{CheckContent}}</p>    \n\n          </div>\n    <template #modal-footer style=\"text-align:center\">\n        <!--<b-button class=\"btn btn-secondary\" href=\"#\" tabindex=\"0\">\n          <span class=\"svg-icon\">\n            <inline-svg src=\"/media/svg/icons/Neolex/Basic/power.svg\" />\n          </span>\n          Hủy\n        </b-button> -->\n      \n          \n\n        <b-button\n          class=\"btn btn-success ml-2\"\n          href=\"#\"\n          @click=\"goback()\"\n          tabindex=\"0\"\n          style=\"width:90px\"\n        >\n        \n          Huỷ\n        \n        </b-button>\n\n        <b-button\n          class=\"btn btn-success ml-2\"\n          href=\"#\"\n          @click=\"handleClick()\"\n          tabindex=\"0\"\n          :disabled=\"isSelectFile\"\n        >\n        <span class=\"svg-icon\">\n            <inline-svg src=\"/media/svg/import/tick.svg\" />\n          </span>\n         Đồng ý\n          \n        </b-button>\n\n        \n      \n      \n    </template>\n  </b-modal>\n</template>\n\n<script>\n//import axios from 'axios'\nexport default {\n  props:{\n  staff_list:{\n    type: Array,\n    default: ()=>[],\n  },\n  survey_code:{\n      type: String,\n  }\n  },\n  name: 'Modal',\n \n  computed: {\n  \n   CheckStatus()\n  {\n   if(this.state_surveyresult.length>=1&&this.state_surveyresult[0].survey_result_id!==null)\n   {\n    this.SelectFile();\n    return \"Dữ liệu này đã được xử lý\";\n \n   }\n    else\n    {\n    return \"Dữ liệu này chưa được xử lý\";\n    }\n  },\n\n   CheckContent()\n  {\n   if(this.state_surveyresult.length>=1&&this.state_surveyresult[0].survey_result_id!==null)\n   {\n    \n    return \" Bạn không thể chỉnh sửa bộ khảo sát này \";\n \n   }\n    else\n    {\n    return \" Bạn có muốn cập nhập lại bộ khảo sát này ? \";\n    }\n  },\n\n  CheckNote()\n  {\n   if(this.state_surveyresult.length>=1&&this.state_surveyresult[0].survey_result_id!==null)\n   {\n    \n    return ;\n \n   }\n    else\n    {\n    return \"( Tất cả những bản ghi cũ của khảo sát này sẽ bị xóa ! )\";\n    }\n  }\n    \n  },\n  watch: {},\n  created()\n  {\n   this.CheckStatus();\n   this.$root.$refs.mCK = this\n  },\n  data() {\n    return {\n      isMounted: false,\n      loading: false,\n      isSelectFile: false,\n      form: {},\n      validationState: {},\n      error: {},\n      checkaccount:[],\n      state_surveyresult: [],\n      \n    };\n    \n  },\n  mounted()\n  {\n    this.loadData();\n     this.elimited();\n    //  console.log(this.staff_list[0].user_code,this.staff_list[0].survey_code)\n  },\n  methods: {\n    \n  goback() {\n      this.$bvModal.hide('user-import-modal_checkrecord');\n    },\n \n     elimited: function()\n   {  \n    \n    return this.staff_list.filter((item, pos, self) => self.findIndex(v => v.user_code === item.user_code) === pos);\n   },\n  \n   async AddSurveyDetails()\n {\n   \n   \n    // get survey_id\n   const survey_id = await  this.$api.get('surveyimport/only_id',{           \n        params:{user_code:this.staff_list[0].user_code ,\n                survey_code:this.staff_list[0].survey_code} \n    })\n     \n              await  this.$api.delete('surveyimportdetails',{\n        params:{survey_id:survey_id[0].id}\n    })  // delete old data if exist \n\n //   console.log(survey_id[0].id,this.staff_list[0].user_code,this.staff_list[0].survey_code)\n \n    for(let k=0;k<Number(this.staff_list.length);k++)     // add new data \n     {\n      await  this.$api.post('SurveyImportDetails',{headers: {'Content-Type': 'application/json'}}, {\n       params: {\n       survey_id : survey_id[0].id,\n       category_code : this.staff_list[k].category_code,\n       category: this.staff_list[k].category,\n       sub_category_code: this.staff_list[k].sub_category_code,\n       sub_category:this.staff_list[k].sub_category,\n       question_code:this.staff_list[k].question_code,\n       question_number:this.staff_list[k].question_number,\n       question_answer:this.staff_list[k].question_answer,\n       question_result:0,\n      }\n        },\n      )}\n \n   \n \n },\n \n\n    async handleClick(){\n      \n         this.$root.$refs.A.SelectFile();\n      this.$store.commit('context/setLoading', true);\n   // await this.addUser().then( this.AddSurvey()).then(this.goback()) ---------------1 user\n    await this.AddSurveyDetails().then(this.goback())\n        .catch((error) => {\n          this.$toastr.e({\n            title: 'Lỗi',\n            msg: error,\n          });\n        }).catch((error) => {\n          this.$toastr.e({\n            title: 'Lỗi',\n            msg: error,\n          });\n        })\n        .finally(() => {\n          this.$store.commit('context/setLoading', false);\n           this.$router.push({\n        name: 'user_import_list',\n         method:{\n          // staff_list : data\n          },\n        params: {\n          \n         staff_list : this.staff_list\n        },\n          })\n        \n            \n          \n        });\n   \n    \n     \n    },\n  async loadData() {\n      \n   \n const survey_id = await  this.$api.get('surveyimport/only_id',{           \n        params:{user_code:this.staff_list[0].user_code ,\n                survey_code:this.staff_list[0].survey_code} \n    })\n\n  await  this.$api.get('SurveyImport/survey_id_result', {\n          params: { id: survey_id[0].id},\n          \n        }).then( data  => {     \n       this.state_surveyresult = data\n        \n        }).catch((error) => {\n          this.$toastr.e({\n            title: 'Lỗi',\n            msg: error,\n          });\n        })  \n        console.log(this.state_surveyresult[0].survey_result_id)\n    },\n\n  SelectFile()\n  {\n     this.isSelectFile=true;\n  } \n\n  },\n \n};\n</script>\n\n<style lang=\"scss\">\n.modal-dialog {\n  height: 60%;\n  width: 600px;\n  display: flex;\n  align-items: center;\n}\n\n.modal-content {\n  margin: 0 auto;\n}\n.modal-footer{\n  justify-content: center;\n  //text-align: center;\n}\n.svg-tick{\n    justify-content: center;\n}\n\n\n</style>\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./messageCheckRecord.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./messageCheckRecord.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./messageCheckRecord.vue?vue&type=template&id=48f06998&\"\nimport script from \"./messageCheckRecord.vue?vue&type=script&lang=js&\"\nexport * from \"./messageCheckRecord.vue?vue&type=script&lang=js&\"\nimport style0 from \"./messageCheckRecord.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}