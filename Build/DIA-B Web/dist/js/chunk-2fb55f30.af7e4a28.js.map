{"version":3,"sources":["webpack:///./src/view/pages/user_import/components/messages/messageNoError.vue?1e0d","webpack:///src/view/pages/user_import/components/messages/messageNoError.vue","webpack:///./src/view/pages/user_import/components/messages/messageNoError.vue?250d","webpack:///./src/view/pages/user_import/components/messages/messageNoError.vue?2271","webpack:///./src/view/pages/user_import/components/messages/messageNoError.vue?04b5"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","attrs","scopedSlots","_u","key","fn","staticClass","staticStyle","on","$event","goback","_v","handleClick","proxy","_s","staff_list","length","staticRenderFns","name","props","type","default","computed","data","user_name","user_code","user_gender","user_yearofbirth","user_career","user_phone","user_hoobit","user_address","user_province","story_success","user_typeofsick","year_foundout","course_goal","course_action","course_final_rate","participation_package","survey_type_code","survey_type","survey_code","survey_name","survey_day","import_day","user_id","survey_id","category_code","category","sub_category_code","sub_category","question_code","question_number","question_answer","question_result","checkaccount","checksurvey","methods","addUser","i","headers","params","AddSurvey","a","n","j","Number","b","survey_type_code_KIND","catch","title","msg","elimited","openModalCheckRecord","CloseModalSuccess","openModalSuccess","finally","mounted","component"],"mappings":"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","file":"js/chunk-2fb55f30.af7e4a28.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-modal',{ref:\"user-import-modal\",attrs:{\"id\":\"user-import-modal\",\"hide-header\":\"\",\"no-stacking\":\"\"},scopedSlots:_vm._u([{key:\"modal-footer\",fn:function(){return [_c('b-button',{staticClass:\"btn btn-success ml-2\",staticStyle:{\"width\":\"90px\"},attrs:{\"href\":\"#\",\"tabindex\":\"0\"},on:{\"click\":function($event){return _vm.goback()}}},[_vm._v(\" Huỷ \")]),_c('b-button',{staticClass:\"btn btn-success ml-2\",attrs:{\"href\":\"#\",\"tabindex\":\"0\"},on:{\"click\":function($event){return _vm.handleClick()}}},[_c('span',{staticClass:\"svg-icon\"},[_c('inline-svg',{attrs:{\"src\":\"/media/svg/import/tick.svg\"}})],1),_vm._v(\" Đồng ý \")])]},proxy:true}])},[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('span',{staticClass:\"svg-tick\"},[_c('inline-svg',{staticStyle:{\"justify-self\":\"center\"},attrs:{\"src\":\"/media/svg/import/sss.svg\"}})],1)]),_c('div',{staticStyle:{\"text-align\":\"center\",\"font-family\":\"Nunito\",\"font-style\":\"normal\",\"font-weight\":\"normal\",\"font-size\":\"14px\"}},[_vm._v(\" \"+_vm._s(this.staff_list.length+\"/\"+_vm.staff_list.length)+\" bản ghi thỏa mãn điều kiện. Bạn có muốn tiếp tục Import dữ liệu? \")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n        \r\n \r\n  <b-modal\r\n    id=\"user-import-modal\"\r\n    ref=\"user-import-modal\"\r\n    hide-header\r\n   \r\n    no-stacking\r\n  >\r\n            <div style=\"text-align:center;\">\r\n            <span class=\"svg-tick\" >\r\n            <inline-svg src=\"/media/svg/import/sss.svg\" style=\"justify-self: center;\"/>\r\n             </span>\r\n            </div>\r\n           \r\n         <div  style=\"text-align:center;font-family: Nunito;font-style: normal;font-weight: normal;font-size: 14px;\">\r\n\r\n          \r\n         {{this.staff_list.length+\"/\"+staff_list.length}} bản ghi  thỏa mãn điều kiện. Bạn có muốn tiếp tục Import dữ liệu?\r\n         \r\n          </div>\r\n    <template #modal-footer style=\"text-align:center\">\r\n        <!--<b-button class=\"btn btn-secondary\" href=\"#\" tabindex=\"0\">\r\n          <span class=\"svg-icon\">\r\n            <inline-svg src=\"/media/svg/icons/Neolex/Basic/power.svg\" />\r\n          </span>\r\n          Hủy\r\n        </b-button> -->\r\n      \r\n          \r\n\r\n        <b-button\r\n          class=\"btn btn-success ml-2\"\r\n          href=\"#\"\r\n          @click=\"goback()\"\r\n          tabindex=\"0\"\r\n          style=\"width:90px\"\r\n        >\r\n        \r\n          Huỷ\r\n        \r\n        </b-button>\r\n\r\n        <b-button\r\n          class=\"btn btn-success ml-2\"\r\n          href=\"#\"\r\n          @click=\"handleClick()\"\r\n          tabindex=\"0\"\r\n      \r\n        >\r\n        <span class=\"svg-icon\">\r\n            <inline-svg src=\"/media/svg/import/tick.svg\" />\r\n          </span>\r\n         Đồng ý\r\n          \r\n        </b-button>\r\n\r\n        \r\n      \r\n      \r\n    </template>\r\n  </b-modal>\r\n \r\n\r\n</template>\r\n\r\n<script>\r\n\r\n//import $ from 'jquery' ;\r\n\r\n//import ModalSuccess from './messageSuccess.vue';\r\n//import axios from 'axios'\r\n//import moment from 'vue-moment'\r\nexport default {\r\n  name: 'Modal',   \r\n // components:{ModalSuccess},\r\n props: {\r\n    staff_list: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n  },\r\n  computed:{\r\n    \r\n\r\n    \r\n  },\r\n  data() {\r\n    return {\r\n      // user \r\n      user_name: '',\r\n      user_code:'',\r\n      user_gender:'',\r\n      user_yearofbirth:'',\r\n      user_career:'',\r\n      user_phone:'',\r\n      user_hoobit:'',\r\n      user_address:'',\r\n      user_province:'',\r\n      story_success:'',\r\n      user_typeofsick:'',\r\n      year_foundout:'',\r\n\r\n// survey\r\n      course_goal:'',\r\n      course_action:'',\r\n      course_final_rate:'',\r\n      participation_package:'',\r\n      survey_type_code:'',\r\n      survey_type:'',\r\n      survey_code:'',\r\n      survey_name:'',\r\n      survey_day:\"\",\r\n      import_day:\"\",\r\n      user_id:'',\r\n   \r\n   //survey details \r\n       survey_id:'',\r\n       category_code :'',\r\n       category:'',\r\n       sub_category_code:'',\r\n       sub_category:'',\r\n       question_code:'',\r\n       question_number:'',\r\n       question_answer:'',\r\n       question_result:'',\r\n     \r\n     data:[],\r\n     checkaccount:[],\r\n    checksurvey:[],\r\n    };\r\n   \r\n  },\r\n  \r\n  methods: {    \r\n  async  addUser() {\r\n\r\n      for(let i=0;i<Number(this.elimited().length);i++)\r\n      {\r\n        await this.$api.post('accountimport', {headers: {'Content-Type': 'application/json'}}, {\r\n        params: {\r\n            \r\n          user_name: this.elimited()[i].user_name,\r\n          user_code: this.elimited()[i].user_code,\r\n          user_gender: this.elimited()[i].user_gender,\r\n          user_yearofbirth: this.elimited()[i].user_yearofbirth,\r\n          user_career: this.elimited()[i].user_career,\r\n          user_phone: this.elimited()[i].user_phone,\r\n          user_hoobit: this.elimited()[i].user_hoobit,\r\n          user_address: this.elimited()[i].user_address,\r\n          user_province: this.elimited()[i].user_province,\r\n          story_success: this.elimited()[i].story_success,\r\n          user_typeofsick: this.elimited()[i].user_typeofsick,\r\n          year_foundout:this.elimited()[i].year_foundout,\r\n           \r\n        },\r\n         \r\n        })\r\n        \r\n        ;;\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n   },\r\n\r\n   async AddSurvey ()\r\n {\r\n\r\n   for(let a=0;a<=Number(this.elimited().length);a++)\r\n     {\r\n\r\n     await  this.$api.get('accountimport/id').then(res=>{          //get all id \r\n       this.checkaccount = res     \r\n     });\r\n     \r\n     }\r\n       await  this.$api.get('surveyimport/id').then(res=>{          //get survey_code , user_id\r\n       this.checksurvey = res});\r\n  // console.log(this.checksurvey)\r\n   \r\n  for(let n=0;n< this.checkaccount.length;n++)\r\n    for(let j=0;j<Number(this.elimited().length);j++)\r\n     {\r\n  \r\n   const survey_day = new Date(this.elimited()[j].survey_day).toISOString();\r\n  // const import_day = new Date(this.elimited()[j].import_day).toISOString();\r\n\r\n  //let toTimestamp = strDate => Date.parse(strDate)\r\n\r\n  if( Number(this.checkaccount[n].user_code)===Number(this.elimited()[j].user_code))\r\n  {\r\n    const a = this.checksurvey.filter((item)=> item.user_id===this.checkaccount[n].id )\r\n    const b = this.checksurvey.filter((item)=> item.survey_code===this.elimited()[j].survey_code)\r\n   \r\n   if(a.length>0 && b.length>0)      // check duplicate survey_imports\r\n    { \r\n     //console.log(this.checksurvey[j].survey_code ,this.checksurvey[j].user_id,this.checkaccount[n].id)\r\n      // console.log(this.checksurvey.filter((item)=> item.user_id===this.checkaccount[n].id ))\r\n      // console.log(this.checksurvey.filter((item)=> item.survey_code===this.elimited()[j].survey_code))\r\n\r\n            this.openModalCheckRecord();\r\n          \r\n  }\r\n else\r\n {\r\n   var survey_type_code_KIND = 'Khác'\r\n\r\n   if(this.elimited()[j].survey_code.slice(0,4)==='KSDV')\r\n   {\r\n       survey_type_code_KIND = 'KSDV'\r\n   }\r\n   if(this.elimited()[j].survey_code.slice(0,4)==='KSDR')\r\n   {\r\n        survey_type_code_KIND = 'KSDR'\r\n   }\r\n   \r\n  await  this.$api.post('surveyimport',{headers: {'Content-Type': 'application/json'}}, {\r\n  \r\n       params: {    \r\n\r\n      user_id :  this.checkaccount[n].id,\r\n      course_goal: this.elimited()[j].course_goal,\r\n      course_action:this.elimited()[j].course_action,\r\n      course_final_rate:this.elimited()[j].course_final_rate,\r\n      participation_package:this.elimited()[j].participation_package,   \r\n      survey_type:this.elimited()[j].survey_type,\r\n      survey_code:this.elimited()[j].survey_code,\r\n      survey_type_code:survey_type_code_KIND,\r\n    //  survey_type_code:this.elimited()[j].survey_code.slice(0,4),\r\n    //   survey_type_code: this.elimited()[j].survey_type_code,\r\n      survey_name:this.elimited()[j].survey_name,\r\n    //  import_day:  import_day.slice(0, 10),\r\n      survey_day: survey_day.slice(0, 10)\r\n        },\r\n   \r\n      \r\n      })\r\n      .catch((error) => {\r\n          this.$toastr.e({\r\n            title: 'Lỗi',\r\n            msg: error,\r\n          });\r\n        })   \r\n     }\r\n  }\r\n     }\r\n },\r\n     elimited: function()\r\n   {  \r\n    \r\n    return this.staff_list.filter((item, pos, self) => self.findIndex(v => v.user_code === item.user_code) === pos);\r\n  },\r\n \r\n\r\n   \r\n     openModalCheckRecord: function()\r\n    {\r\n        this.$root.$refs.A.clickshow_checkrecord();\r\n       this.CloseModalSuccess();\r\n      \r\n        \r\n    },\r\n\r\n    CloseModalSuccess: function()\r\n    {\r\n        this.$root.$refs.A.clickhide();\r\n        \r\n    },\r\n\r\n    openModalSuccess: function()\r\n    {\r\n        this.$root.$refs.A.clickshow();\r\n        \r\n    },\r\n    goback()\r\n    {\r\n      this.$bvModal.hide('user-import-modal')\r\n    //  this.$root.$refs.A.NotselectFile();\r\n    },\r\n\r\n    async handleClick(){\r\n         this.$root.$refs.A.SelectFile();\r\n      this.$store.commit('context/setLoading', true);\r\n   // await this.addUser().then( this.AddSurvey()).then(this.goback()) ---------------1 user\r\n    await this.addUser().then(this.AddSurvey()).then(this.goback())\r\n        .finally(() => {\r\n          this.$store.commit('context/setLoading', false);\r\n             this.openModalSuccess();\r\n          \r\n        });\r\n   \r\n    \r\n     \r\n    },\r\n    \r\n  },\r\n  mounted(){\r\n      this.elimited();\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.modal-dialog {\r\n  height: 60%;\r\n  width: 600px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.modal-content {\r\n  margin: 0 auto;\r\n}\r\n.modal-footer{\r\n  justify-content: center;\r\n  //text-align: center;\r\n}\r\n.svg-tick{\r\n    justify-content: center;\r\n}\r\n\r\n\r\n</style>\r\n}","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./messageNoError.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./messageNoError.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./messageNoError.vue?vue&type=template&id=3f0f75b2&\"\nimport script from \"./messageNoError.vue?vue&type=script&lang=js&\"\nexport * from \"./messageNoError.vue?vue&type=script&lang=js&\"\nimport style0 from \"./messageNoError.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./messageNoError.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}