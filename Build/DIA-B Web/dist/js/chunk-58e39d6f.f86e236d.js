(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58e39d6f"],{6302:function(t,e,n){"use strict";n("dff9")},acbd:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"user-import-modal_checkrecord",attrs:{id:"user-import-modal_checkrecord","hide-header":"","no-close-on-backdrop":""},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[n("b-button",{staticClass:"btn btn-success ml-2",staticStyle:{width:"90px"},attrs:{href:"#",tabindex:"0"},on:{click:function(e){return t.goback()}}},[t._v(" Huỷ ")]),n("b-button",{staticClass:"btn btn-success ml-2",attrs:{href:"#",tabindex:"0",disabled:t.isSelectFile},on:{click:function(e){return t.handleClick()}}},[n("span",{staticClass:"svg-icon"},[n("inline-svg",{attrs:{src:"/media/svg/import/tick.svg"}})],1),t._v(" Đồng ý ")])]},proxy:!0}])},[n("div",{staticStyle:{"text-align":"center",margin:"5px",padding:"10px"}},[n("span",{staticClass:"svg-tick"},[n("inline-svg",{staticStyle:{"justify-self":"center"},attrs:{src:"/media/svg/import/alert-circle.svg"}})],1)]),n("div",[n("p",{staticStyle:{"text-align":"center","font-family":"Nunito","font-style":"normal","font-weight":"bold","font-size":"20px","line-height":"20px",color:"red"}},[t._v("Chú ý: Đã tồn tại bộ khảo sát này !")]),n("p",{staticStyle:{"text-align":"center","font-family":"Nunito","font-style":"normal","font-weight":"normal","font-size":"17px","line-height":"20px",color:"red"}},[t._v(t._s(t.CheckNote))]),n("ul",[n("li",[n("p",{staticStyle:{"text-align":"left","font-family":"Nunito","font-style":"normal","font-weight":"normal","font-size":"18px","line-height":"20px"}},[t._v("Bệnh Nhân: "+t._s(t.staff_list[0].user_name))])]),n("li",[n("p",{staticStyle:{"text-align":"left","font-family":"Nunito","font-style":"normal","font-weight":"normal","font-size":"18px","line-height":"20px"}},[t._v("Mã Bệnh Nhân: "+t._s(t.staff_list[0].user_code))])]),n("li",[n("p",{staticStyle:{"text-align":"left","font-family":"Nunito","font-style":"normal","font-weight":"normal","font-size":"18px","line-height":"20px"}},[t._v("Bộ Khảo Sát: "+t._s(t.staff_list[0].survey_name))])]),n("li",[n("p",{staticStyle:{"text-align":"left","font-family":"Nunito","font-style":"normal","font-weight":"normal","font-size":"18px","line-height":"20px"}},[t._v("Mã Khảo Sát: "+t._s(t.staff_list[0].survey_code))])]),n("li",[n("p",{staticStyle:{"text-align":"left","font-family":"Nunito","font-style":"normal","font-weight":"normal","font-size":"18px","line-height":"20px",color:"blue"}},[t._v("Trạng thái: "+t._s(t.CheckStatus))])])]),n("p",{staticStyle:{"text-align":"center","font-family":"Nunito","font-style":"normal","font-weight":"normal","font-size":"17px","line-height":"20px",color:"red"}},[t._v(t._s(t.CheckContent))])])])},i=[],r=(n("4de4"),n("c740"),n("a9e3"),n("d3b7"),n("96cf"),n("1da1")),o={props:{staff_list:{type:Array,default:function(){return[]}},survey_code:{type:String}},name:"Modal",computed:{CheckStatus:function(){return this.state_surveyresult.length>=1&&null!==this.state_surveyresult[0].survey_result_id?(this.SelectFile(),"Dữ liệu này đã được xử lý"):"Dữ liệu này chưa được xử lý"},CheckContent:function(){return this.state_surveyresult.length>=1&&null!==this.state_surveyresult[0].survey_result_id?" Bạn không thể chỉnh sửa bộ khảo sát này ":" Bạn có muốn cập nhập lại bộ khảo sát này ? "},CheckNote:function(){return this.state_surveyresult.length>=1&&null!==this.state_surveyresult[0].survey_result_id?void 0:"( Tất cả những bản ghi cũ của khảo sát này sẽ bị xóa ! )"}},watch:{},created:function(){this.CheckStatus(),this.$root.$refs.mCK=this},data:function(){return{isMounted:!1,loading:!1,isSelectFile:!1,form:{},validationState:{},error:{},checkaccount:[],state_surveyresult:[]}},mounted:function(){this.loadData(),this.elimited()},methods:{goback:function(){this.$bvModal.hide("user-import-modal_checkrecord")},elimited:function(){return this.staff_list.filter((function(t,e,n){return n.findIndex((function(e){return e.user_code===t.user_code}))===e}))},AddSurveyDetails:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.get("surveyimport/only_id",{params:{user_code:t.staff_list[0].user_code,survey_code:t.staff_list[0].survey_code}});case 2:return n=e.sent,e.next=5,t.$api.delete("surveyimportdetails",{params:{survey_id:n[0].id}});case 5:s=0;case 6:if(!(s<Number(t.staff_list.length))){e.next=12;break}return e.next=9,t.$api.post("SurveyImportDetails",{headers:{"Content-Type":"application/json"}},{params:{survey_id:n[0].id,category_code:t.staff_list[s].category_code,category:t.staff_list[s].category,sub_category_code:t.staff_list[s].sub_category_code,sub_category:t.staff_list[s].sub_category,question_code:t.staff_list[s].question_code,question_number:t.staff_list[s].question_number,question_answer:t.staff_list[s].question_answer,question_result:0}});case 9:s++,e.next=6;break;case 12:case"end":return e.stop()}}),e)})))()},handleClick:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$root.$refs.A.SelectFile(),t.$store.commit("context/setLoading",!0),e.next=4,t.AddSurveyDetails().then(t.goback()).catch((function(e){t.$toastr.e({title:"Lỗi",msg:e})})).catch((function(e){t.$toastr.e({title:"Lỗi",msg:e})})).finally((function(){t.$store.commit("context/setLoading",!1),t.$router.push({name:"user_import_list",method:{},params:{staff_list:t.staff_list}})}));case 4:case"end":return e.stop()}}),e)})))()},loadData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.get("surveyimport/only_id",{params:{user_code:t.staff_list[0].user_code,survey_code:t.staff_list[0].survey_code}});case 2:return n=e.sent,e.next=5,t.$api.get("SurveyImport/survey_id_result",{params:{id:n[0].id}}).then((function(e){t.state_surveyresult=e})).catch((function(e){t.$toastr.e({title:"Lỗi",msg:e})}));case 5:console.log(t.state_surveyresult[0].survey_result_id);case 6:case"end":return e.stop()}}),e)})))()},SelectFile:function(){this.isSelectFile=!0}}},a=o,l=(n("6302"),n("2877")),c=Object(l["a"])(a,s,i,!1,null,null,null);e["default"]=c.exports},dff9:function(t,e,n){}}]);
//# sourceMappingURL=chunk-58e39d6f.f86e236d.js.map