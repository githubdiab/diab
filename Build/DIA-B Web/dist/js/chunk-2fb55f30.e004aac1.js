(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2fb55f30"],{"3cc9":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-modal",{ref:"user-import-modal",attrs:{id:"user-import-modal","hide-header":"","no-stacking":""},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[r("b-button",{staticClass:"btn btn-success ml-2",staticStyle:{width:"90px"},attrs:{href:"#",tabindex:"0"},on:{click:function(t){return e.goback()}}},[e._v(" Huỷ ")]),r("b-button",{staticClass:"btn btn-success ml-2",attrs:{href:"#",tabindex:"0"},on:{click:function(t){return e.handleClick()}}},[r("span",{staticClass:"svg-icon"},[r("inline-svg",{attrs:{src:"/media/svg/import/tick.svg"}})],1),e._v(" Đồng ý ")])]},proxy:!0}])},[r("div",{staticStyle:{"text-align":"center"}},[r("span",{staticClass:"svg-tick"},[r("inline-svg",{staticStyle:{"justify-self":"center"},attrs:{src:"/media/svg/import/sss.svg"}})],1)]),r("div",{staticStyle:{"text-align":"center","font-family":"Nunito","font-style":"normal","font-weight":"normal","font-size":"14px"}},[e._v(" "+e._s(this.staff_list.length+"/"+e.staff_list.length)+" bản ghi thỏa mãn điều kiện. Bạn có muốn tiếp tục Import dữ liệu? ")])])},i=[],s=(r("4de4"),r("c740"),r("fb6a"),r("a9e3"),r("d3b7"),r("3ca3"),r("ddb0"),r("96cf"),r("1da1")),c={name:"Modal",props:{staff_list:{type:Array,default:function(){return[]}}},computed:{},data:function(){return{user_name:"",user_code:"",user_gender:"",user_yearofbirth:"",user_career:"",user_phone:"",user_hoobit:"",user_address:"",user_province:"",story_success:"",user_typeofsick:"",year_foundout:"",course_goal:"",course_action:"",course_final_rate:"",participation_package:"",survey_type_code:"",survey_type:"",survey_code:"",survey_name:"",survey_day:"",import_day:"",user_id:"",survey_id:"",category_code:"",category:"",sub_category_code:"",sub_category:"",question_code:"",question_number:"",question_answer:"",question_result:"",data:[],checkaccount:[],checksurvey:[]}},methods:{addUser:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=0;case 1:if(!(r<Number(e.elimited().length))){t.next=8;break}return t.next=4,e.$api.post("accountimport",{headers:{"Content-Type":"application/json"}},{params:{user_name:e.elimited()[r].user_name,user_code:e.elimited()[r].user_code,user_gender:e.elimited()[r].user_gender,user_yearofbirth:e.elimited()[r].user_yearofbirth,user_career:e.elimited()[r].user_career,user_phone:e.elimited()[r].user_phone,user_hoobit:e.elimited()[r].user_hoobit,user_address:e.elimited()[r].user_address,user_province:e.elimited()[r].user_province,story_success:e.elimited()[r].story_success,user_typeofsick:e.elimited()[r].user_typeofsick,year_foundout:e.elimited()[r].year_foundout}});case 4:case 5:r++,t.next=1;break;case 8:case"end":return t.stop()}}),t)})))()},AddSurvey:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=0;case 1:if(!(r<=Number(e.elimited().length))){t.next=7;break}return t.next=4,e.$api.get("accountimport/id").then((function(t){e.checkaccount=t}));case 4:r++,t.next=1;break;case 7:return t.next=9,e.$api.get("surveyimport/id").then((function(t){e.checksurvey=t}));case 9:n=regeneratorRuntime.mark((function t(r){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=regeneratorRuntime.mark((function t(n){var i,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=new Date(e.elimited()[n].survey_day).toISOString(),e.checkaccount[r].user_code!==Number(e.elimited()[n].user_code)){t.next=10;break}if(s=e.checksurvey.filter((function(t){return t.user_id===e.checkaccount[r].id})),c=e.checksurvey.filter((function(t){return t.survey_code===e.elimited()[n].survey_code})),!(s.length>0&&c.length>0)){t.next=8;break}e.openModalCheckRecord(),t.next=10;break;case 8:return t.next=10,e.$api.post("surveyimport",{headers:{"Content-Type":"application/json"}},{params:{user_id:e.checkaccount[r].id,course_goal:e.elimited()[n].course_goal,course_action:e.elimited()[n].course_action,course_final_rate:e.elimited()[n].course_final_rate,participation_package:e.elimited()[n].participation_package,survey_type_code:e.elimited()[n].survey_type_code,survey_type:e.elimited()[n].survey_type,survey_code:e.elimited()[n].survey_code,survey_name:e.elimited()[n].survey_name,survey_day:i.slice(0,10)}}).catch((function(t){e.$toastr.e({title:"Lỗi",msg:t})}));case 10:case"end":return t.stop()}}),t)})),i=0;case 2:if(!(i<Number(e.elimited().length))){t.next=7;break}return t.delegateYield(n(i),"t0",4);case 4:i++,t.next=2;break;case 7:case"end":return t.stop()}}),t)})),i=0;case 11:if(!(i<e.checkaccount.length)){t.next=16;break}return t.delegateYield(n(i),"t0",13);case 13:i++,t.next=11;break;case 16:case"end":return t.stop()}}),t)})))()},elimited:function(){return this.staff_list.filter((function(e,t,r){return r.findIndex((function(t){return t.user_code===e.user_code}))===t}))},openModalCheckRecord:function(){this.$root.$refs.A.clickshow_checkrecord(),this.CloseModalSuccess()},CloseModalSuccess:function(){this.$root.$refs.A.clickhide()},openModalSuccess:function(){this.$root.$refs.A.clickshow()},goback:function(){this.$bvModal.hide("user-import-modal")},handleClick:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$root.$refs.A.SelectFile(),e.$store.commit("context/setLoading",!0),t.next=4,e.addUser().then(e.AddSurvey()).then(e.goback()).finally((function(){e.$store.commit("context/setLoading",!1),e.openModalSuccess()}));case 4:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.elimited()}},a=c,o=(r("e0a7"),r("2877")),u=Object(o["a"])(a,n,i,!1,null,null,null);t["default"]=u.exports},"55ea":function(e,t,r){},e0a7:function(e,t,r){"use strict";r("55ea")}}]);
//# sourceMappingURL=chunk-2fb55f30.e004aac1.js.map